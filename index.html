<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Andre's Calibrations</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

<div class="app-container">
  <header>
    <div class="header-content">
      <div class="header-left">
        <select id="programSelect" class="program-selector" onchange="switchProgram(this.value)">
            <option value="AndreMapWave">Andre Map Wave</option>
            <option value="BaseMapLinear">Base Map Linear</option>
        </select>
        <div class="subtitle" id="programSubtitle">Professional Periodization</div>
      </div>
      
      <div class="header-stats">
         <div class="stat-box">
          <span class="stat-label">TOTAL</span>
          <span class="stat-val" id="currentTotal">0</span>
        </div>
         <div class="stat-box">
          <span class="stat-label">DOTS</span>
          <span class="stat-val" id="currentDots">-</span>
        </div>
      </div>

      <div class="header-actions">
        <button class="action-btn" id="login-btn" onclick="openAuthModal()">
             <span class="icon">üë§</span> Login
        </button>
        <button class="action-btn" id="logout-btn" style="display:none;">
             <span class="icon">üëã</span> Logout
        </button>

        <button class="action-btn" onclick="openTools()">
          <span class="icon">üõ†</span> Settings
        </button>
        <div class="unit-toggle" onclick="toggleUnit()">
          <span id="unitLabel">LBS</span>
        </div>
        <button class="action-btn" onclick="window.print()">PDF</button>
      </div>
    </div>
  </header>

  <section class="control-panel no-print">
    <div class="panel-header">
      <h3>Lifter 1RM Stats</h3>
    </div>
    <div class="inputs-grid">
      <div class="input-group"><label>Squat</label><input type="number" id="squatInput" placeholder="0"></div>
      <div class="input-group"><label>Bench</label><input type="number" id="benchInput" placeholder="0"></div>
      <div class="input-group"><label>Deadlift</label><input type="number" id="deadliftInput" placeholder="0"></div>
      <div class="input-group"><label>OHP</label><input type="number" id="ohpInput" placeholder="0"></div>
    </div>
  </section>

  <div id="view-andre">
      <nav class="week-nav no-print">
        <button class="nav-btn" onclick="setWeek(1)">Week 1</button>
        <button class="nav-btn" onclick="setWeek(2)">Week 2</button>
        <button class="nav-btn" onclick="setWeek(3)">Week 3</button>
        <button class="nav-btn" onclick="setWeek(4)">Week 4</button>
        <button class="nav-btn" onclick="setWeek(5)">Week 5 (Peak)</button>
        <button class="nav-btn deload-btn" onclick="setWeek(6)">Deload</button>
      </nav>

      <div class="progress-container no-print">
        <div class="progress-bar" id="progressBar"></div>
      </div>

      <div id="andreContent" class="grid-layout"></div>
      
      <div style="margin-top:20px; display:flex; gap:10px; justify-content:center;">
          <button class="action-btn" onclick="openMeetPlanner()">üèÜ Meet Planner</button>
          <button class="action-btn" onclick="openPlateCalc(45)">üíø Plate Loader</button>
      </div>
  </div>

  <div id="view-dashboard" style="display:none;">
      <div class="dashboard-controls no-print">
          <div class="dash-group">
            <label>Mode</label>
            <select id="dashMode" onchange="updateDashSettings()">
                <option value="standard">Standard (4 Weeks)</option>
                <option value="deload">Deload (2 Weeks)</option>
                <option value="maintenance">Maintenance (6 Weeks)</option>
                <option value="standard_acc">Standard + Accessories</option>
                <option value="randomizer">Progression Randomizer</option>
            </select>
          </div>
          <div class="dash-group">
            <label>Reps</label>
            <select id="dashReps" onchange="updateDashSettings()">
                <option value="5">5 Reps</option>
                <option value="4">4 Reps</option>
                <option value="3" selected>3 Reps</option>
                <option value="2">2 Reps</option>
                <option value="1">1 Rep</option>
            </select>
          </div>
          <div class="dash-group">
             <label>Diet</label>
             <button id="fastedBtn" class="dash-btn" onclick="toggleFasted()">Fasted: OFF</button>
          </div>
      </div>

      <div class="mobile-nav no-print" id="dashMobileNav">
        <button onclick="changeMobileWeek(-1)">‚Üê Prev</button>
        <span id="mobileWeekLabel">Week 1</span>
        <button onclick="changeMobileWeek(1)">Next ‚Üí</button>
      </div>

      <div id="dashboardGrid" class="full-program-grid"></div>

      <div id="randomizerCard" class="tool-card" style="display:none; margin-top:20px; border: 2px solid #2196f3;">
        <h2>Progression Randomizer</h2>
        <div class="inputs-grid" style="grid-template-columns: 1fr 1fr;">
          <select id="randGoal" style="grid-column: span 2;">
            <option value="strength">Strength (+4% Weight / -1 Rep)</option>
            <option value="recovery">Recovery (-7% Weight / +2 Reps)</option>
            <option value="pump">Pump (+2% Weight / +1 Rep)</option>
          </select>
          <input type="number" id="prevWeight" placeholder="Last Weight">
          <input type="number" id="prevReps" placeholder="Last Reps">
        </div>
        <button class="full-btn" onclick="runRandomizer()" style="background:#2196f3; margin-top:10px;">Generate Target</button>
        <div id="randomizerResult" class="stat-box" style="display:none; margin-top:15px; background:#111;">
          <div id="randOutputText"></div>
        </div>
      </div>

      <div class="footer-tools no-print">
        <div class="tool-card">
          <h3>1RM Estimator</h3>
          <div class="inputs-grid" style="grid-template-columns: 1fr 1fr;">
            <input type="number" id="calcWeight" placeholder="Weight">
            <input type="number" id="calcReps" placeholder="Reps">
          </div>
          <button class="full-btn" onclick="calculateOneRM()">Estimate</button>
          <div id="oneRmResults" style="display:none; margin-top:10px;">
              <table class="calc-table"><tbody id="formulaBody"></tbody></table>
          </div>
        </div>

        <div class="tool-card">
          <h3>DOTS Calculator</h3>
          <div class="inputs-grid" style="grid-template-columns: 1fr 1fr;">
            <input type="number" id="dotsTotalInput" placeholder="Total">
            <input type="number" id="bodyWeightInput" placeholder="BW">
          </div>
          <select id="genderInput" style="width:100%; margin-top:5px;"><option value="male">Male</option><option value="female">Female</option></select>
          <button class="full-btn" onclick="calculateDotsOnly()">Calc DOTS</button>
          <div id="dotsResults" style="display:none; margin-top:10px;"><div class="stat-box"><span id="dotsDisplay">0.00</span></div></div>
        </div>

        <div class="tool-card">
          <h3>Accessory Library</h3>
          <select id="accCategory" onchange="updateAccOptions()" style="width:100%; margin-bottom:5px;">
            <option value="squat">Squat Help</option>
            <option value="bench">Bench Accessories</option>
            <option value="deadlift">Deadlift Accessories</option>
          </select>
          <select id="accExercise" onchange="displayAccDetails()" style="width:100%;"></select>
          <div id="accDetails" class="acc-details-box" style="display:none;">
            <span class="tier-badge" id="accTier"></span>
            <h4 id="accName"></h4>
            <p id="accNotes"></p>
          </div>
        </div>
      </div>
  </div>
   
  <footer>
    <p>Andre's Calibrations &copy; 2026</p>
  </footer>
</div>

<div id="authModal" class="modal">
  <div class="modal-content">
    <span class="close-modal" onclick="closeModal('authModal')">&times;</span>
    <h3>Join the Team</h3>
    <div style="display:flex; flex-direction:column; gap:10px; margin-top:15px;">
        <input type="email" id="emailInput" placeholder="Enter Email" style="padding:10px; background:#222; border:1px solid #444; color:white;">
        <input type="password" id="passInput" placeholder="Enter Password" style="padding:10px; background:#222; border:1px solid #444; color:white;">
        <button class="full-btn" id="emailLoginBtn">Log In with Email</button>
        <button class="full-btn outline" id="emailSignupBtn">Create Account</button>
        <div style="text-align:center; margin:10px 0; color:#666;">- OR -</div>
        <button class="full-btn" id="googleLoginBtn" style="background:#4285F4; border:none;">
          <i class="fab fa-google" style="margin-right:8px;"></i> Sign in with Google
        </button>
        <button class="full-btn" id="anonLoginBtn" style="background:#333; border:none; margin-top:5px;">
          <i class="fas fa-user-secret" style="margin-right:8px;"></i> Continue as Guest
        </button>
    </div>
  </div>
</div>

<div id="restTimer" class="rest-timer no-print">
  <div class="timer-display">
    <span id="timerText">03:00</span>
    <div class="timer-controls">
      <button class="timer-btn" onclick="adjustTimer(-30)">-30</button>
      <button class="timer-btn" onclick="toggleTimer()" id="timerToggle">Start</button>
      <button class="timer-btn" onclick="adjustTimer(30)">+30</button>
    </div>
  </div>
  <button class="close-timer" onclick="resetTimer()">‚Ü∫</button>
</div>

<div id="plateModal" class="modal">
  <div class="modal-content">
    <span class="close-modal" onclick="closeModal('plateModal')">&times;</span>
    <h3>Plate Loader</h3>
    <div class="plate-display">
      <div class="target-weight" id="plateTarget">0</div>
      <div class="plate-visuals" id="plateVisuals"></div>
      <div class="plate-text" id="plateText">Loading...</div>
    </div>
  </div>
</div>

<div id="warmupModal" class="modal">
  <div class="modal-content large-modal">
    <span class="close-modal" onclick="closeModal('warmupModal')">&times;</span>
    <div class="warmup-header">
      <h2 id="warmupTitle">Warm-up</h2>
      <div class="warmup-controls">
        <label>Strategy:</label>
        <select id="warmupStrategy" onchange="renderWarmup()">
          <option value="aggressive">Aggressive</option>
          <option value="conservative">Conservative</option>
        </select>
      </div>
    </div>
    <div class="warmup-grid">
      <div class="warmup-list">
        <h4>Sets</h4>
        <table id="warmupTable"></table>
      </div>
      <div class="warmup-cues">
        <h4>Cues</h4>
        <ul id="cuesList"></ul>
      </div>
    </div>
  </div>
</div>

<div id="meetModal" class="modal">
  <div class="modal-content large-modal">
    <span class="close-modal" onclick="closeModal('meetModal')">&times;</span>
    <h2>Competition Strategy</h2>
    <div class="meet-grid" id="meetGrid"></div>
  </div>
</div>

<div id="toolsModal" class="modal">
  <div class="modal-content large-modal">
    <span class="close-modal" onclick="closeModal('toolsModal')">&times;</span>
    <h2>Global Settings</h2>
    <div class="tools-layout">
      <div class="tool-card">
        <h3>Gym Bag Settings</h3>
        <div class="setting-row">
          <label>Squat Rack Height</label>
          <input type="text" id="rackSquat" placeholder="e.g. 12" onchange="saveSettings()">
        </div>
        <div class="setting-row">
          <label>Bench Rack Height</label>
          <input type="text" id="rackBench" placeholder="e.g. 8" onchange="saveSettings()">
        </div>
        <div class="setting-row">
          <label>Bodyweight (Global)</label>
          <input type="number" id="bodyweight" placeholder="lbs/kg" onchange="saveSettings()">
        </div>
      </div>
      <div class="tool-card">
        <h3>Data Backup</h3>
        <p>Copy this code to save your data externally.</p>
        <textarea id="exportArea" readonly onclick="this.select()"></textarea>
        <button class="full-btn" onclick="copyData()">Copy Save Code</button>
      </div>
    </div>
  </div>
</div>

<script type="module" src="script.js"></script>

</body>
</html>
