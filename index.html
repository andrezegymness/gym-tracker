<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Andre OG Program</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="app-container">
  <header>
    <div class="header-content">
      <div class="header-left">
        <div class="brand">ANDRE OG PROGRAM</div>
        <div class="subtitle">Professional Powerlifting Periodization</div>
      </div>
      
      <div class="header-stats">
         <div class="stat-box">
          <span class="stat-label">TOTAL</span>
          <span class="stat-val" id="currentTotal">0</span>
        </div>
         <div class="stat-box">
          <span class="stat-label">DOTS</span>
          <span class="stat-val" id="currentDots">-</span>
        </div>
      </div>

      <div class="header-actions">
        <button class="action-btn" id="login-btn">
             <span class="icon">üë§</span> Login
        </button>
        <button class="action-btn" id="logout-btn" style="display:none;">
             <span class="icon">üëã</span> Logout
        </button>

        <button class="action-btn" onclick="openTools()">
          <span class="icon">üõ†</span> Tools
        </button>
        <button class="action-btn" onclick="openMeetPlanner()">
          <span class="icon">üèÜ</span> Plan
        </button>
        <div class="unit-toggle" onclick="toggleUnit()">
          <span id="unitLabel">LBS</span>
        </div>
        <button class="action-btn" onclick="window.print()">PDF</button>
      </div>
    </div>
  </header>

  <section class="control-panel no-print">
    <div class="panel-header">
      <h3>Current 1RM Inputs</h3>
      <button id="resetBtn" class="btn-text">Reset</button>
    </div>
    <div class="inputs-grid">
      <div class="input-group"><label>Squat</label><input type="number" id="squatInput" placeholder="0"></div>
      <div class="input-group"><label>Bench</label><input type="number" id="benchInput" placeholder="0"></div>
      <div class="input-group"><label>Deadlift</label><input type="number" id="deadliftInput" placeholder="0"></div>
      <div class="input-group"><label>OHP</label><input type="number" id="ohpInput" placeholder="0"></div>
    </div>
  </section>

  <nav class="week-nav no-print" id="weekNav">
    <button class="nav-btn" onclick="setWeek(1)">Week 1</button>
    <button class="nav-btn" onclick="setWeek(2)">Week 2</button>
    <button class="nav-btn" onclick="setWeek(3)">Week 3</button>
    <button class="nav-btn" onclick="setWeek(4)">Week 4</button>
    <button class="nav-btn" onclick="setWeek(5)">Week 5 (Peak)</button>
    <button class="nav-btn deload-btn" onclick="setWeek(6)">Deload</button>
  </nav>

  <div class="progress-container no-print">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <main id="programContent">
    </main>
   
  <footer>
    <p>Andre OG Program &copy; 2026</p>
  </footer>
</div>

<div id="restTimer" class="rest-timer no-print">
  <div class="timer-display">
    <span id="timerText">03:00</span>
    <div class="timer-controls">
      <button class="timer-btn" onclick="adjustTimer(-30)">-30</button>
      <button class="timer-btn" onclick="toggleTimer()" id="timerToggle">Start</button>
      <button class="timer-btn" onclick="adjustTimer(30)">+30</button>
    </div>
  </div>
  <button class="close-timer" onclick="resetTimer()">‚Ü∫</button>
</div>

<div id="plateModal" class="modal">
  <div class="modal-content">
    <span class="close-modal" onclick="closeModal('plateModal')">&times;</span>
    <h3>Plate Loader</h3>
    <div class="plate-display">
      <div class="target-weight" id="plateTarget">0</div>
      <div class="plate-visuals" id="plateVisuals"></div>
      <div class="plate-text" id="plateText">Loading...</div>
    </div>
  </div>
</div>

<div id="warmupModal" class="modal">
  <div class="modal-content large-modal">
    <span class="close-modal" onclick="closeModal('warmupModal')">&times;</span>
    <div class="warmup-header">
      <h2 id="warmupTitle">Warm-up</h2>
      <div class="warmup-controls">
        <label>Strategy:</label>
        <select id="warmupStrategy" onchange="renderWarmup()">
          <option value="aggressive">Aggressive</option>
          <option value="conservative">Conservative</option>
        </select>
      </div>
    </div>
    <div class="warmup-grid">
      <div class="warmup-list">
        <h4>Sets</h4>
        <table id="warmupTable"></table>
      </div>
      <div class="warmup-cues">
        <h4>Cues</h4>
        <ul id="cuesList"></ul>
      </div>
    </div>
  </div>
</div>

<div id="meetModal" class="modal">
  <div class="modal-content large-modal">
    <span class="close-modal" onclick="closeModal('meetModal')">&times;</span>
    <h2>Competition Strategy</h2>
    <div class="meet-grid" id="meetGrid"></div>
  </div>
</div>

<div id="toolsModal" class="modal">
  <div class="modal-content large-modal">
    <span class="close-modal" onclick="closeModal('toolsModal')">&times;</span>
    <h2>Lifter's Utility Belt</h2>
    
    <div class="tools-layout">
      <div class="tool-card">
        <h3>Gym Bag Settings</h3>
        <div class="setting-row">
          <label>Squat Rack Height</label>
          <input type="text" id="rackSquat" placeholder="e.g. 12" onchange="saveSettings()">
        </div>
        <div class="setting-row">
          <label>Bench Rack Height</label>
          <input type="text" id="rackBench" placeholder="e.g. 8" onchange="saveSettings()">
        </div>
        <div class="setting-row">
          <label>Bodyweight (for DOTS)</label>
          <input type="number" id="bodyweight" placeholder="lbs/kg" onchange="saveSettings()">
        </div>
      </div>

      <div class="tool-card">
        <h3>Data Backup</h3>
        <p>Copy this code to save your data externally.</p>
        <textarea id="exportArea" readonly onclick="this.select()"></textarea>
        <button class="full-btn" onclick="copyData()">Copy Save Code</button>
        <div style="margin-top:10px; border-top:1px solid #333; padding-top:10px;">
          <input type="text" id="importInput" placeholder="Paste Save Code Here">
          <button class="full-btn outline" onclick="importData()">Restore Data</button>
        </div>
      </div>
    </div>
    
    <div class="rpe-chart">
      <h3>RPE Reference</h3>
      <table>
        <thead><tr><th>RPE</th><th>Reps In Reserve</th><th>Feeling</th></tr></thead>
        <tbody>
          <tr><td>@10</td><td>0</td><td>Max Effort (No reps left)</td></tr>
          <tr><td>@9</td><td>1</td><td>Heavy (Could do 1 more)</td></tr>
          <tr><td>@8</td><td>2</td><td>Fast (Could do 2 more)</td></tr>
          <tr><td>@7</td><td>3</td><td>Warm-up / Speed Work</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<script type="module">
  // 1. Import Tools
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
  import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // 2. YOUR REAL KEYS
  const firebaseConfig = {
    apiKey: "AIzaSyB_1QW2BtfK5eZzakW858fg2UlAS5tZY7M",
    authDomain: "powerlifting-programs.firebaseapp.com",
    projectId: "powerlifting-programs",
    storageBucket: "powerlifting-programs.firebasestorage.app",
    messagingSenderId: "961044250962",
    appId: "1:961044250962:web:c45644c186e9bb6ee67a8b",
    measurementId: "G-501TXRLMSQ"
  };

  // 3. Initialize App
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const provider = new GoogleAuthProvider();

  // 4. Button Logic
  const loginBtn = document.getElementById('login-btn');
  const logoutBtn = document.getElementById('logout-btn');

  // Sign In
  if (loginBtn) {
      loginBtn.addEventListener('click', () => {
        signInWithPopup(auth, provider)
          .then((result) => {
            console.log("Logged in:", result.user.email);
          })
          .catch((error) => console.error("Login Error:", error));
      });
  }

  // Sign Out
  if (logoutBtn) {
      logoutBtn.addEventListener('click', () => {
        signOut(auth).then(() => console.log("Logged out"));
      });
  }

  // Monitor Login State
  onAuthStateChanged(auth, (user) => {
    if (user) {
      if(loginBtn) loginBtn.style.display = 'none';
      if(logoutBtn) {
          logoutBtn.style.display = 'inline-flex'; 
          logoutBtn.innerHTML = `<span class="icon">üëã</span> ${user.displayName.split(' ')[0]}`; // Show Name
      }
    } else {
      if(loginBtn) loginBtn.style.display = 'inline-flex';
      if(logoutBtn) logoutBtn.style.display = 'none';
    }
  });

  // Make DB available to your other scripts if needed
  window.db = db; 
  window.auth = auth;
</script>

<script type="module" src="script.js"></script>

</body>
</html>
